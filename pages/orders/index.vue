<template>
    <v-row justify="center" align="center">
        <v-col cols="12">
            <v-card height="64" color="primary" class="mx-3 mt-10">
                <v-row>
                    <span class="white--text ma-5 mx-15 t18600">
                        مدیریت سفارشات
                    </span>
                </v-row>
            </v-card>
            <v-card  min-height="103" class="mx-10 mt-5 br-15" outlined>
                <v-row justify="space-between" class="pa-11">
                  <v-col cols="4">
                    <div class="text-right primary--text t14600 mr-2">
                      ماشین مینی بابکت
                    </div>
                    <div class="d-flex justify-space-between mt-5">
                      <div class="order-chip d-flex justify-center align-center">
                          <span class="primary--text">
                            ماشین آلات
                          </span>
                      </div>
                      <div>
                        <span class="primary--text">
                          ۱.۹۳۰.۰۰۰.۰۰۰ تومان
                        </span>
                      </div>
                    </div>
                    <div class="d-flex justify-space-between mt-5 pr-3">
                      <div>
                        <span class="primary--text">
                          گلزار حیدری
                        </span>
                      </div>
                      <div>
                         <span class="ml-3 mt-1">
                             <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 16 16" fill="none">
                              <g clip-path="url(#clip0_520_4382)">
                              <path d="M14.6666 11.28V13.28C14.6674 13.4657 14.6294 13.6494 14.555 13.8195C14.4806 13.9897 14.3715 14.1424 14.2347 14.2679C14.0979 14.3934 13.9364 14.489 13.7605 14.5485C13.5846 14.6079 13.3982 14.63 13.2133 14.6133C11.1619 14.3904 9.19131 13.6894 7.45998 12.5667C5.84919 11.5431 4.48353 10.1774 3.45998 8.56665C2.33329 6.82745 1.63214 4.84731 1.41331 2.78665C1.39665 2.60229 1.41856 2.41649 1.47764 2.24107C1.53673 2.06564 1.63169 1.90444 1.75649 1.76773C1.88128 1.63102 2.03318 1.52179 2.2025 1.447C2.37183 1.37221 2.55487 1.33349 2.73998 1.33332H4.73998C5.06351 1.33013 5.37717 1.4447 5.62248 1.65567C5.8678 1.86664 6.02803 2.15961 6.07331 2.47998C6.15772 3.12003 6.31428 3.74847 6.53998 4.35332C6.62967 4.59193 6.64908 4.85126 6.59591 5.10057C6.54274 5.34988 6.41922 5.57872 6.23998 5.75998L5.39331 6.60665C6.34235 8.27568 7.72428 9.65761 9.39331 10.6067L10.24 9.75998C10.4212 9.58074 10.6501 9.45722 10.8994 9.40405C11.1487 9.35088 11.408 9.37029 11.6466 9.45998C12.2515 9.68568 12.8799 9.84224 13.52 9.92665C13.8438 9.97234 14.1396 10.1355 14.351 10.385C14.5624 10.6345 14.6748 10.953 14.6666 11.28Z" stroke="#0C385F" stroke-linecap="round" stroke-linejoin="round"/>
                              </g>
                              <defs>
                              <clipPath id="clip0_520_4382">
                              <rect width="16" height="16" fill="white"/>
                              </clipPath>
                              </defs>
                              </svg>
                          </span>
                          <span class="primary--text">
                           ۰۹۳۰۰۱۷۹۶۴۸
                          </span>

                      </div>
                    </div>
                    <div class="d-flex justify-space-between mt-5 pr-3">
                      <div>
                        <span class="primary--text">
                         تاریخ سفارش
                        </span>
                        <span class="primary--text mr-5">
                         ۱۴۰۱/۱۲/۱۷
                        </span>
                      </div>
                      <div>
                         <span class="ml-3 mt-1">
                           <svg xmlns="http://www.w3.org/2000/svg" width="17" height="17" viewBox="0 0 17 17" fill="none">
                              <path d="M14.875 7.08337C14.875 12.0417 8.5 16.2917 8.5 16.2917C8.5 16.2917 2.125 12.0417 2.125 7.08337C2.125 5.39262 2.79665 3.77111 3.99219 2.57557C5.18774 1.38002 6.80924 0.708374 8.5 0.708374C10.1908 0.708374 11.8123 1.38002 13.0078 2.57557C14.2033 3.77111 14.875 5.39262 14.875 7.08337Z" stroke="#0C385F" stroke-linecap="round" stroke-linejoin="round"/>
                              <path d="M8.5 9.20837C9.6736 9.20837 10.625 8.25698 10.625 7.08337C10.625 5.90977 9.6736 4.95837 8.5 4.95837C7.32639 4.95837 6.375 5.90977 6.375 7.08337C6.375 8.25698 7.32639 9.20837 8.5 9.20837Z" stroke="#0C385F" stroke-linecap="round" stroke-linejoin="round"/>
                            </svg>
                          </span>
                          <span class="primary--text">
                          تحویل حضوری
                          </span>

                      </div>
                    </div>
                  </v-col>
                  <v-col cols="6">
                    <v-card outlined class="pa-5 br-20">
                      <div class="d-flex justify-space-between align-center">
                        <div>
                            <span class="primary--text">
                              گلزار حیدری
                            </span>
                        </div>
                        <div class="d-flex justify-space-between align-center">
                          <span class="primary--text">
                            در حال بررسی
                          </span>
                          <div class="primary--text mt-2 mx-4">
                            <svg width="18" height="18" viewBox="0 0 18 18" fill="none" xmlns="http://www.w3.org/2000/svg">
                              <path d="M10.375 6.15625L6.9375 9.25L10.375 12.3438" stroke="#0C385F" stroke-linecap="round" stroke-linejoin="round"/>
                              <path d="M9 17.5C13.5563 17.5 17.25 13.8063 17.25 9.25C17.25 4.69365 13.5563 1 9 1C4.44365 1 0.75 4.69365 0.75 9.25C0.75 13.8063 4.44365 17.5 9 17.5Z" stroke="#0C385F" stroke-miterlimit="10"/>
                            </svg>

                          </div>
                          <span class="primary--text">
                            ثبت شده
                          </span>
                        </div>
                      </div>
                    </v-card>
                  </v-col>
                  <v-col cols="2">
                    <div class="d-flex justify-end">
                      <div class="status-box-success text-center pt-2" >
                        <span class="t14400 DeepGreen--text">ثبت شده</span>
                      </div>
                    </div>
                    <v-row class="mt-15 pt-10">
                      <v-col cols="4">
                        <v-btn class="br-10" block color="ChineseWhite">
                          <span class="primary--text">
                            انصراف
                          </span>
                        </v-btn>
                      </v-col>
                      <v-col cols="8">
                        <v-btn class="br-10" block color="primary">
                          <span class="white--text">
                            بارگذاری نهایی
                          </span>
                        </v-btn>
                      </v-col>

                    </v-row>
                  </v-col>
                </v-row>
            </v-card>

            <v-card height="103" outlined class="ma-3 mx-10 br-15" v-for="order in orders" :key="order.id">
                <v-row align="center" class="fill-height">
                    <v-col cols="8">
                        <v-row justify="space-between" align="center" class="fill-height  mr-5">
                            <v-col cols="2" class="pt-3">
                                <span class="t14600">
                                    {{ order.details[0].variantName }}
                                </span>
                            </v-col>
                            <v-col cols="2" class="pt-3">
                                <span class="t14600">
                                    {{ orderClientName(order) }}
                                </span>
                            </v-col>
                            <v-col cols="2">
                                <v-row align="center" class="pr-2 pt-8">
                                    <span class="ml-2">
                                        <img src="~/assets/img/phone.svg" alt="">
                                    </span>
                                    <span class="t14400 dana-fa">
                                        {{ orderClientMobile(order) }}
                                    </span>
                                </v-row>
                            </v-col>
                            <v-col cols="2">
                                <v-row align="center" class="pr-2 pt-8">
                                    <span class="ml-2">
                                        <img src="~/assets/img/map-pin.svg" alt="">
                                    </span>
                                    <span class="t14400 dana-fa">
                                        {{ order.delivery.name }}
                                    </span>
                                </v-row>
                            </v-col>
                            <v-col cols="2" class="pt-6">
                                <div class="status-box-success text-center pt-2" v-if="order.currentStatus">
                                    <span class="t14400 DeepGreen--text">{{ order.currentStatus.name }}</span>
                                </div>
                            </v-col>

                        </v-row>
                    </v-col>
                    <v-col cols="4">
                        <v-row justify="end" align="center" class="fill-height mt-3 mr-5 pl-10">

                            <!-- <span>
                                <v-btn icon>
                                    <img src="~/assets/img/edit.svg" alt="">
                                </v-btn>
                            </span>
                            <span class="mr-5">
                                <v-btn icon>
                                    <img src="~/assets/img/trash-2.svg" alt="">
                                </v-btn>
                            </span> -->

                        </v-row>
                    </v-col>
                </v-row>
            </v-card>

            <div class="text-center mt-5">
                <v-pagination v-model="page" :length="pageLength" circle color="black"></v-pagination>
            </div>
        </v-col>
    </v-row>
</template>

<script>
export default {
    name: 'IndexPage',
    data() {
        return {
            message: '',
            page: 1
        }
    },

    computed: {
        orders() {
            return this.$store.getters['get_orders']
        },

        pageLength() {
            return this.$store.getters['get_orderPageLength']
        }
    },

    watch: {
        page(val) {
            let page = (val - 1) * 20
            let fillter = ',offset:' + page
            this.$store.dispatch('set_orders', fillter)
        }
    },
    methods: {
        orderClientName(e) {
            try {
                return e.customer.client.user.firstName
            } catch (error) {
                return ''
            }
        },
        orderClientMobile(e) {
            try {
                return e.customer.client.mobile
            } catch (error) {
                return ''
            }
        }
    },

    beforeMount() { this.$store.dispatch('set_orders', '') }
}
</script>

<style>
.order-chip{
  width: 118px;
  height: 40px;
  border-radius: 18.5px;
  background: #E0E0E0;

}
</style>
